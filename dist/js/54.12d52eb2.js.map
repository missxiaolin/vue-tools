{"version":3,"file":"js/54.12d52eb2.js","mappings":"8IAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAQD,EAAIE,MAAMC,GAAG,OAAOH,EAAII,GAAG,EAC1E,EACIC,EAAkB,CAAC,WAAY,IAAIL,EAAIC,KAAKE,EAAGH,EAAIE,MAAMC,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,SAAS,CAACG,MAAM,CAAC,GAAK,qBAC1G,GCIA,GACAC,UACA,iCACA,4CACA,qBACA,MACA,MACAC,QAAAA,IAAAA,EAAAA,EAAAA,WAAAA,EAAAA,WAAAA,SAAAA,EAAAA,MAIA,oIACAC,WACAC,SAAAA,EAAAA,YAGA,OACA,qBACA,kBACAC,EAAAA,IAAAA,EAAAA,EACA,GAGA,YACAA,EAAAA,IAAAA,EAAAA,GACAC,EAAAA,MAAAA,KACAA,EAAAA,OAAAA,IACAD,EAAAA,OAAAA,WACAE,EAAAA,UAAAA,EAAAA,EAAAA,EACA,EAEA,YACAF,EAAAA,IAAAA,EAAAA,GACAE,EAAAA,UAAAA,EAAAA,EAAAA,EAAAA,EAGAC,OAAAA,iBAAAA,UAAAA,KACA,oBACA,oCACA,MAEA,WACAC,EAAAA,EACAC,KAAAA,KAAAA,EAAAA,IAGAC,uBAAAA,IAAAA,EAAAA,EAAAA,IAAAA,IAGAC,GACA,GCzDqS,I,WCQjSC,GAAY,OACd,EACApB,EACAM,GACA,EACA,KACA,KACA,MAIF,EAAec,EAAiB,O","sources":["webpack://a/./src/views/gsap/video/index.vue","webpack://a/src/views/gsap/video/index.vue","webpack://a/./src/views/gsap/video/index.vue?934d","webpack://a/./src/views/gsap/video/index.vue?890e"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _vm._m(0)\n}\nvar staticRenderFns = [function (){var _vm=this,_c=_vm._self._c;return _c('div',[_c('canvas',{attrs:{\"id\":\"hero-lightpass\"}})])\n}]\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <canvas id=\"hero-lightpass\" />\n  </div>\n</template>\n\n<script>\nexport default {\n  mounted() {\n    const html = document.documentElement;\n    const canvas = document.getElementById(\"hero-lightpass\");\n    const context = canvas.getContext(\"2d\");\n    const frameCount = 148;\n    const currentFrame = (index) => {\n      console.log(index, index.toString(), index.toString().padStart(4, \"0\"));\n      // 1 '1' '0001'\n      // 13 '13' '0013'\n      // 148 '148' '0148'\n      return `https://www.apple.com/105/media/us/airpods-pro/2019/1299e2f5_9206_4470_b28e_08307a42f19b/anim/sequence/large/01-hero-lightpass/${index\n        .toString()\n        .padStart(4, \"0\")}.jpg`;\n    };\n\n    const preloadImages = () => {\n      for (let i = 1; i < frameCount; i++) {\n        const img = new Image();\n        img.src = currentFrame(i);\n      }\n    };\n\n    const img = new Image();\n    img.src = currentFrame(1);\n    canvas.width = 1158;\n    canvas.height = 770;\n    img.onload = function () {\n      context.drawImage(img, 0, 0);\n    };\n\n    const updateImage = (index) => {\n      img.src = currentFrame(index);\n      context.drawImage(img, 0, 0);\n    };\n\n    window.addEventListener(\"scroll\", () => {\n      const scrollTop = html.scrollTop;\n      const maxScrollTop = html.scrollHeight - window.innerHeight; // 总共可以滚动的距离\n      const scrollFraction = scrollTop / maxScrollTop; // 当前滚动距离 / 总滚动距离\n      // 当前图片帧 index = 滚动比例 * 总图片帧数\n      const frameIndex = Math.min(\n        frameCount - 1,\n        Math.ceil(scrollFraction * frameCount)\n      );\n\n      requestAnimationFrame(() => updateImage(frameIndex + 1));\n    });\n\n    preloadImages();\n  },\n};\n</script>\n\n<style>\nbody {\n  height: 500vh;\n  background: #000;\n}\ncanvas {\n  position: fixed;\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  max-width: 100vw;\n  max-height: 100vh;\n}\n</style>\n","import mod from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=f580a6f8&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=f580a6f8&prod&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_self","_c","_m","staticRenderFns","attrs","mounted","console","toString","padStart","img","canvas","context","window","frameCount","Math","requestAnimationFrame","preloadImages","component"],"sourceRoot":""}