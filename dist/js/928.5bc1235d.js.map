{"version":3,"file":"js/928.5bc1235d.js","mappings":"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","sources":["webpack://a/./src/views/editorTest.vue","webpack://a/./src/views/editorTest.vue?c2e3","webpack://a/./src/views/editorTest.vue?a7f0","webpack://a/src/views/editorTest.vue","webpack://a/./src/utils/ruler.js"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"fabric-con\"},[_c('div',{staticClass:\"fabric-body\",attrs:{\"id\":\"canvas-box\"},on:{\"drop\":function($event){return _vm.drop($event)},\"touchstart\":function($event){return _vm.drop($event)},\"dragover\":function($event){return _vm.allowDrop($event)}}},[_c('canvas',{staticClass:\"root\"}),_c('canvas',{attrs:{\"id\":\"designCanvas\"}})])])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./editorTest.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./editorTest.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./editorTest.vue?vue&type=template&id=4a1ca7d7&scoped=true&\"\nimport script from \"./editorTest.vue?vue&type=script&lang=js&\"\nexport * from \"./editorTest.vue?vue&type=script&lang=js&\"\nimport style0 from \"./editorTest.vue?vue&type=style&index=0&id=4a1ca7d7&prod&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/cli-service/node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4a1ca7d7\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"content\">\n    <div class=\"fabric-con\">\n      <div\n        class=\"fabric-body\"\n        id=\"canvas-box\"\n        @drop=\"drop($event)\"\n        @touchstart=\"drop($event)\"\n        @dragover=\"allowDrop($event)\"\n      >\n        <canvas class=\"root\"></canvas>\n        <canvas id=\"designCanvas\"></canvas>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { fabric } from \"fabric\";\nimport Ruler from \"../utils/ruler\";\nexport default {\n  components: {},\n  created() {},\n  mounted() {\n    let _this = this;\n    this.init();\n    this.ruler = new Ruler({\n      canvasId: \".root\",\n      width: 1000,\n    }).render();\n  },\n  data() {\n    return {\n      zoomPoint: \"\", //中心点\n      zoom: 1, //缩放比例\n      viewportTransform: null, //拖动画布后，存的距离上左的间距arr[0]比率；arr[4]左右移动的距离；arr[5]上下移动距离\n      design: \"\",\n      ActiveObject: {},\n      ActiveGroup: [],\n\n      ruler: null,\n      timer: null,\n      lastTime: null,\n    };\n  },\n  methods: {\n    init: function () {\n      let _this = this;\n      _this.design = new fabric.Canvas(\"designCanvas\", {\n        backgroundColor: \"\",\n        // skipTargetFind: false, //当为真时，跳过目标检测。目标检测将返回始终未定义。点击选择将无效\n        // selectable: false,  //为false时，不能选择对象进行修改\n        // selection: false   // 是否可以多个对象为一组\n      });\n      fabric.Object.prototype.originX = fabric.Object.prototype.originY =\n        \"center\";\n      let dom = document.getElementById(\"canvas-box\");\n      this.contextMenuTarget = dom;\n\n      _this.design.setWidth(dom.offsetWidth);\n      _this.design.setHeight(dom.offsetHeight);\n      this.zoomPoint = new fabric.Point(\n        _this.design.width / 2,\n        _this.design.height / 2\n      );\n      // window.onresize=function(){\n      //     _this.design.setWidth(dom.offsetWidth);\n      //     _this.design.setHeight(dom.offsetHeight);\n      //     console.log(_this.design)\n      //     // _this.design.zoomToPoint(_this.zoomPoint, _this.zoom);\n      //     // _this.design.requestRenderAll();\n      // };\n\n      _this.design.on(\"mouse:wheel\", function (opt) {\n        var delta = opt.e.deltaY;\n        _this.zoom = _this.design.getZoom();\n        _this.zoom *= 0.999 ** delta;\n        if (_this.zoom > 20) _this.zoom = 20;\n        if (_this.zoom < 0.01) _this.zoom = 0.01;\n        this.zoomToPoint(_this.zoomPoint, _this.zoom);\n        // this.setZoom(_this.zoom);\n        _this.mouseWheel();\n        opt.e.preventDefault();\n        opt.e.stopPropagation();\n        _this.viewportTransform = this.viewportTransform;\n      });\n    },\n    mouseWheel: function () {\n      this.ruler.update({\n        scale: this.zoom,\n      });\n      // let _this=this;\n      // clearTimeout(this.timer);\n      // this.timer=null;\n      // if(this.lastTime==null){\n      //     this.ruler.update({\n      //         scale:this.zoom,\n      //     });\n      // }else{\n      //     let lastTime=new Date();\n      //     if(lastTime.getTime()-this.lastTime.getTime()>500){ //时间超过了一秒\n      //         this.ruler.update({\n      //             scale:this.zoom,\n      //         });\n      //     }else{\n      //         this.timer=setTimeout(() => {\n      //             _this.mouseWheel();\n      //         }, 500);\n      //     }\n      // }\n      // this.lastTime=new Date();\n    },\n    transformMouse(mouseX, mouseY) {\n      return { x: mouseX / 1, y: mouseY / 1 };\n    },\n    //拖拽\n    drag: function (ev, item) {\n      ev.dataTransfer.setData(\"item\", JSON.stringify(item));\n    },\n    allowDrop: function (ev) {\n      ev.preventDefault();\n    },\n    drop: function (ev) {\n      var object = \"\";\n      // //开始缩放\n      this.design.zoomToPoint(this.zoomPoint, this.zoom);\n\n      var json = JSON.parse(ev.dataTransfer.getData(\"item\"));\n      var left = ev.offsetX;\n      var top = ev.offsetY;\n      //viewportTransform[0] 存的缩放比例；viewportTransform[4]X轴移动距离；this.viewportTransform[5]Y轴移动距离\n      if (this.viewportTransform) {\n        left = (left - this.viewportTransform[4]) / this.zoom;\n        top = (top - this.viewportTransform[5]) / this.zoom;\n      }\n      json.left = left;\n      json.top = top;\n      json.data[\"uuid\"] = uuid();\n      switch (json.data.type) {\n        case \"Line\":\n          //[终止位置，线长，起始位置，top]\n          object = new fabric.Line([left, json.width, left, top], json);\n          break;\n        case \"IText\":\n          object = new fabric.IText(\"文字信息\", json);\n          break;\n        case \"Echart\":\n          object = this.getCanvas(json);\n          break;\n        case \"Svg\":\n          this.getSvg(json);\n          break;\n        default:\n          object = new fabric[json.data.type](json);\n          break;\n      }\n      if (object != \"\") {\n        this.addObject(object);\n      }\n    },\n    addObject: function (object) {\n      let _this = this;\n      object.toObject = (function (toObject) {\n        //赋值自定义属性\n        return function (properties) {\n          return fabric.util.object.extend(toObject.call(this, properties), {\n            data: this.data,\n          });\n        };\n      })(object.toObject);\n      this.design.add(object);\n    },\n    getCanvas: function (json) {\n      var canvas = document.createElement(\"canvas\");\n      canvas.width = json.width ? json.width * this.zoom : 100;\n      canvas.height = json.height ? json.height * this.zoom : 100;\n      console.log(canvas);\n      var myChart = echarts.init(canvas);\n      var data = json.data || {};\n      if (data.hasOwnProperty(\"handle\")) {\n        for (let i = 0; i < json.data.handle.length; i++) {\n          eval(data.handle[i]);\n        }\n      }\n      myChart.setOption(data.options, true);\n      var CanvasRect = fabric.util.createClass(fabric.Rect, {\n        type: \"canvasRect\",\n        initialize: function (options) {\n          options || (options = {});\n          this.callSuper(\"initialize\", options);\n          // this.set('label', options.label || '');\n        },\n        toObject: function () {\n          return fabric.util.object.extend(this.callSuper(\"toObject\"), {\n            // label: this.get('label'),\n          });\n        },\n        _render: function (ctx) {\n          this.callSuper(\"_render\", ctx);\n          var offcanvas = myChart.getRenderedCanvas({\n            pixelRatio: 2,\n            backgroundColor: \"\",\n          });\n          //在画布上定位图像，并规定图像的宽度和高度： ctx.drawImage(img,x,y,width,height);\n          ctx.drawImage(\n            offcanvas,\n            -(json.width / 2),\n            -(json.height / 2),\n            json.width,\n            json.height\n          );\n        },\n      });\n      console.log(new CanvasRect(json));\n      return new CanvasRect(json);\n    },\n    getSvg: function (json) {\n      let _this = this;\n      fabric.Image.fromURL(json.data.imgsrc, function (object) {\n        console.log(object);\n        object[\"data\"] = json.data;\n        object.set({\n          left: json.left,\n          top: json.top,\n          // scaleX:json.width/object.width,\n          // scaleY:json.height/object.height\n        });\n        object.scaleToWidth(json.width);\n        object.scaleToHeight(json.height);\n        _this.addObject(object);\n      });\n    },\n    changeImg: function () {\n      let _this = this;\n      if (this.design.getActiveObject()) {\n        let objects = this.design.getObjects();\n        let uuid = this.design.getActiveObject().data.uuid;\n        for (let i = 0; i < objects.length; i++) {\n          // //更改图片\n          if (objects[i].data.uuid == uuid && objects[i].data.type == \"Svg\") {\n            console.log(objects[i]);\n            let imgsrc = \"images/runstatus.svg\";\n            let json = objects[i];\n            json.data.imgsrc = imgsrc;\n            fabric.Image.fromURL(imgsrc, function (object) {\n              console.log(object);\n              object[\"data\"] = json.data;\n              object.set({\n                left: json.left,\n                top: json.top,\n              });\n              object.scaleToWidth(objects[i].width * objects[i].scaleX);\n              object.scaleToHeight(objects[i].height * objects[i].scaleY);\n              _this.design.remove(json);\n              _this.addObject(object);\n            });\n          }\n\n          //更改canvas\n          if (\n            objects[i].data.uuid == uuid &&\n            objects[i].data.type == \"Echart\"\n          ) {\n            console.log(objects[i]);\n            console.log(this.zoom);\n            let json = {\n              width: objects[i].width,\n              height: objects[i].height,\n              data: objects[i].data,\n            };\n            json.data.value = 5.2;\n\n            var canvas = document.createElement(\"canvas\");\n            canvas.width = json.width;\n            canvas.height = json.height;\n            console.log(canvas);\n            var myChart = echarts.init(canvas);\n            var data = json.data || {};\n            if (data.hasOwnProperty(\"handle\")) {\n              for (let i = 0; i < json.data.handle.length; i++) {\n                eval(data.handle[i]);\n              }\n            }\n            myChart.setOption(data.options, true);\n            var offcanvas = myChart.getRenderedCanvas({\n              pixelRatio: 2,\n              backgroundColor: \"\",\n            });\n            objects[i]._cacheContext.clearRect(\n              -(json.width / 2),\n              -(json.height / 2),\n              json.width,\n              json.height\n            );\n            objects[i]._cacheContext.drawImage(\n              offcanvas,\n              -(json.width / 2),\n              -(json.height / 2),\n              json.width,\n              json.height\n            );\n            this.design.renderAll();\n          }\n        }\n      }\n    },\n    //删除对象\n    removeObject: function () {\n      if (this.design.getActiveObject()) {\n        console.log(this.design.getActiveObject());\n        this.$confirm(\"确定删除？\", \"提示\", {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\",\n        }).then(() => {\n          this.design.remove(this.design.getActiveObject());\n        });\n      } else {\n        this.$notify.warning(\"请选择需要删除的对象\");\n      }\n    },\n    //保存\n    saveDesign: function () {\n      //canvas.item(0).sourcePath = '/assets/dragon.svg';\n      sessionStorage.setItem(\n        \"canvasDesign\",\n        JSON.stringify(this.design.toDatalessJSON())\n      );\n      console.log(JSON.stringify(this.design.toJSON()));\n      this.$notify.success(\"保存成功！\");\n    },\n    //查看\n    showDesign: function () {\n      this.$router.push({ path: \"/show\" });\n    },\n    test: function () {\n      fabric.backgroundImage = \"https://source.unsplash.com/random\";\n    },\n\n    //绘制多边形\n    drawPolyLine: function (type) {\n      this.drawType = type;\n      this.polygonMode = true;\n      this.pointArray = []; // 顶点集合\n      this.lineArray = []; //线集合\n      this.design.isDrawingMode = false;\n    },\n    finishPolyLine: function () {\n      this.activeLine = null;\n      this.activeShape = null;\n      this.polygonMode = false;\n      this.doDrawing = false;\n      this.drawType = null;\n    },\n    generatePolygon() {\n      var points = [];\n      this.pointArray.map((point, index) => {\n        points.push({\n          x: point.left,\n          y: point.top,\n        });\n        this.design.remove(point);\n      });\n      this.lineArray.map((line, index) => {\n        this.design.remove(line);\n      });\n      this.design.remove(this.activeShape).remove(this.activeLine);\n      var polygon = new fabric.Polygon(points, {\n        stroke: this.color,\n        strokeWidth: this.drawWidth,\n        fill: \"rgba(255, 255, 255, 0)\",\n        opacity: 1,\n        hasBorders: true,\n        hasControls: false,\n      });\n      this.design.add(polygon);\n\n      this.finishPolyLine();\n    },\n    generateSegements() {\n      this.design.remove(this.lineArray[this.lineArray.length - 1]);\n      this.lineArray.splice(this.lineArray.length - 1, 1);\n\n      for (let i = 0; i < this.pointArray.length; i++) {\n        if (i == 0) {\n          this.pointArray[i].startLine = null;\n          this.pointArray[i].endLine = this.lineArray[0];\n        } else {\n          if (i == this.lineArray.length) {\n            this.pointArray[i].startLine = this.lineArray[i - 1];\n            this.pointArray[i].endLine = null;\n          } else {\n            this.pointArray[i].startLine = this.lineArray[i - 1];\n            this.pointArray[i].endLine = this.lineArray[i];\n          }\n        }\n      }\n\n      // for(let i=0;i<this.pointArray.length;i++){\n      //     if(i==0){\n      //         this.design.add(this.makeCircle(this.lineArray[i].get('x1'),this.lineArray[i].get('y1'),null,this.lineArray[i]));\n      //     }else{\n      //         if(i==this.lineArray.length){\n      //             this.design.add(this.makeCircle(this.lineArray[i-1].get('x2'),this.lineArray[i-1].get('y2'),this.lineArray[i-1],null));\n      //         }else{\n      //             this.design.add(this.makeCircle(this.lineArray[i-1].get('x2'),this.lineArray[i-1].get('y2'),this.lineArray[i-1],this.lineArray[i]));\n      //         }\n      //     }\n      // }\n\n      this.finishPolyLine();\n    },\n    makeCircle: function (left, top, line1, line2) {\n      var c = new fabric.Circle({\n        left: left,\n        top: top,\n        radius: 5,\n        fill: \"#ffffff\",\n        stroke: \"#333333\",\n        strokeWidth: 0.5,\n      });\n      c.hasControls = c.hasBorders = false;\n\n      c.startLine = line1;\n      c.endLine = line2;\n\n      return c;\n    },\n    addPoint(e) {\n      // var random = Math.floor(Math.random() * 10000);\n      // var id = new Date().getTime() + random;\n      var id = uuid();\n      var circle = new fabric.Circle({\n        radius: 5,\n        fill: \"#ffffff\",\n        stroke: \"#333333\",\n        strokeWidth: 0.5,\n        left: (e.pointer.x || e.e.layerX) / this.design.getZoom(),\n        top: (e.pointer.y || e.e.layerY) / this.design.getZoom(),\n        // selectable: false,\n        hasBorders: false,\n        hasControls: false,\n        originX: \"center\",\n        originY: \"center\",\n        id: id,\n        objectCaching: false,\n      });\n      var points = [\n        (e.pointer.x || e.e.layerX) / this.design.getZoom(),\n        (e.pointer.y || e.e.layerY) / this.design.getZoom(),\n        (e.pointer.x || e.e.layerX) / this.design.getZoom(),\n        (e.pointer.y || e.e.layerY) / this.design.getZoom(),\n      ];\n\n      this.line = new fabric.Line(points, {\n        strokeWidth: 2,\n        fill: \"#999999\",\n        stroke: \"#999999\",\n        class: \"line\",\n        originX: \"center\",\n        originY: \"center\",\n        selectable: false,\n        // hasBorders: false,\n        // hasControls: false,\n        evented: false,\n\n        objectCaching: false,\n      });\n      if (this.drawType == \"polygon\") {\n        if (this.activeShape) {\n          var pos = this.design.getPointer(e.e);\n          var points = this.activeShape.get(\"points\");\n          points.push({\n            x: pos.x,\n            y: pos.y,\n          });\n          var polygon = new fabric.Polygon(points, {\n            stroke: \"#333333\",\n            strokeWidth: 1,\n            fill: \"#cccccc\",\n            opacity: 0.3,\n\n            selectable: false,\n            hasBorders: false,\n            hasControls: false,\n            evented: false,\n            objectCaching: false,\n          });\n          this.design.remove(this.activeShape);\n          this.design.add(polygon);\n          this.activeShape = polygon;\n          this.design.renderAll();\n        } else {\n          var polyPoint = [\n            {\n              x: (e.pointer.x || e.e.layerX) / this.design.getZoom(),\n              y: (e.pointer.y || e.e.layerY) / this.design.getZoom(),\n            },\n          ];\n          var polygon = new fabric.Polygon(polyPoint, {\n            stroke: \"#333333\",\n            strokeWidth: 1,\n            fill: \"#cccccc\",\n            opacity: 0.3,\n\n            selectable: false,\n            hasBorders: false,\n            hasControls: false,\n            evented: false,\n            objectCaching: false,\n          });\n          this.activeShape = polygon;\n          this.design.add(polygon);\n        }\n      }\n\n      this.activeLine = this.line;\n\n      this.pointArray.push(circle);\n      this.lineArray.push(this.line);\n      this.design.add(this.line);\n      this.design.add(circle);\n    },\n    //操作图层\n    handleLayer: function (type) {\n      console.log(type);\n      switch (type) {\n        case \"upLayer\":\n          if (this.ActiveObject) {\n            this.ActiveObject.bringForward();\n          }\n          break;\n        case \"downLayer\":\n          if (this.ActiveObject) {\n            this.ActiveObject.sendBackwards();\n          }\n          break;\n        case \"topLayer\":\n          if (this.ActiveObject) {\n            this.ActiveObject.bringToFront();\n          }\n          break;\n        case \"footLayer\":\n          if (this.ActiveObject) {\n            this.ActiveObject.sendToBack();\n          }\n          break;\n        case \"removeLayer\":\n          if (this.ActiveObject) {\n            this.$confirm(\"确定删除？\", \"提示\", {\n              confirmButtonText: \"确定\",\n              cancelButtonText: \"取消\",\n              type: \"warning\",\n            }).then(() => {\n              console.log(this.ActiveObject);\n              this.design.remove(this.ActiveObject);\n              this.ActiveObject = null;\n            });\n          }\n          break;\n        default:\n      }\n      this.contextMenuVisible = false;\n    },\n  },\n  watch: {\n    drawType() {\n      this.design.selection = !this.drawType;\n    },\n  },\n};\n</script>\n<style lang=\"scss\" scoped>\n.content {\n  width: 100%;\n  height: 100%;\n  background: #061c47;\n  .fabric-top {\n    width: 100%;\n    height: 60px;\n    font-size: 16px;\n    background: #052b62;\n    text-align: right;\n    padding: 0 20px;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    .item {\n      color: #dde4f6;\n      margin-left: 20px;\n      font-size: 30px;\n      line-height: 60px;\n      cursor: pointer;\n    }\n  }\n  .fabric-con {\n    width: 100%;\n    height: calc(100% - 60px);\n    display: flex;\n  }\n  .fabric-body {\n    width: calc(100% - 225px);\n    height: 100%;\n  }\n  .side-bar {\n    width: 225px;\n    height: 100%;\n    display: block;\n    background: #073474;\n    color: #dde4f6;\n    z-index: 999;\n    transition: all 0.5s ease-in;\n    .collapse-con {\n      padding: 15px 10px 0;\n      display: flex;\n      flex-wrap: wrap;\n      span {\n        display: block;\n        margin: 0 5px;\n        cursor: move;\n        i {\n          font-size: 40px;\n          color: #dde4f6;\n        }\n      }\n    }\n    .el-collapse {\n      border-color: #0a3b79;\n    }\n    .el-collapse-item__header {\n      background: #0a3b79;\n      color: #fff;\n      border-bottom-color: #073474;\n      padding-left: 20px;\n    }\n    .el-collapse-item__wrap {\n      background-color: #073474;\n      border-color: #073474;\n    }\n    .el-collapse-item__arrow {\n      font-size: 16px;\n    }\n    .el-collapse-item.is-active .el-collapse-item__header {\n      color: #16c5bb;\n    }\n    .el-scrollbar__wrap {\n      overflow-x: hidden;\n    }\n  }\n}\n</style>\n","\"use strict\";\n/**\n * @class Ruler\n */\nvar Ruler = /** @class */ (function () {\n    function Ruler(config) {\n        /**\n         * default config\n         */\n        this.config = {\n            width: 500,\n            height: 24,\n            color: '#000',\n            background: '#fff',\n            labelColor: '#345',\n            labelFontSize: 12,\n            labelFontFamily: 'Arial',\n            lineWidth: 1,\n            scale: 1,\n            lastScale:1,\n            wheelScroll:100,\n            wheelUpNumber:1,\n            wheelDownNumber:1,\n            upArr:[],\n            downArr:[],\n            first:true,\n            labelScale: 1,\n            canvas: document.createElement('canvas'),\n            start: 0,\n            beginOffset: 0,\n            endOffset: 0,\n            base: 10,\n            originOffset: 0,\n        };\n        Object.assign(this.config, config);\n        this.checkCanvas();\n        this.resize();\n    }\n    Object.defineProperty(Ruler.prototype, \"canvas\", {\n        get: function () {\n            return this.config.canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * resize the base canvas\n     */\n    Ruler.prototype.resize = function () {\n        var config = this.config;\n        var canvas = config.canvas, width = config.width, height = config.height;\n        canvas.width = width;\n        canvas.height = height;\n        canvas.style.width = width + \"px\";\n        canvas.style.height = height + \"px\";\n        return this;\n    };\n    /** render the ruler */\n    Ruler.prototype.render = function () {\n        return this.beforeRender().rendering().afterRender();\n    };\n    /** update the config of the ruler and refresh it */\n    Ruler.prototype.update = function (config) {\n        var scale = this.config.scale;\n        var lastScale=this.config.lastScale;\n        Object.assign(this.config, config);\n        if (config.width || config.height)\n            this.resize();\n        if (config.scale) {\n            console.log(scale,config.scale,this.config.wheelScroll,this.config.base,this.config.upArr,this.config.downArr)\n            if(scale==config.scale){\n                return;\n            }\n            if(scale>config.scale){ //缩小\n                if(this.config.first){\n                    this.config.wheelScroll--;\n                    this.config.downArr.push(10);\n                    this.config.first=false;\n                }\n                if(this.config.wheelScroll%4==0){\n                    if(this.config.upArr.length>0){\n                        this.config.base=this.config.upArr[this.config.upArr.length-1];\n                        this.config.upArr.splice(this.config.upArr.length-1,1);\n                    }else{\n                        this.config.base=this.config.base+10*this.config.wheelDownNumber;\n                        this.config.wheelDownNumber++;\n                        this.config.downArr.push(this.config.base);\n                    }\n                    this.render();\n                    // if(this.config.downArr.length==0&&this.config.upArr.length==0&&this.config.wheelScroll==100){ //初始化直接缩小\n                    //     this.addAnimate({ type: 'scale', from: scale, to: config.scale });\n                    // }else{\n                    //     if(this.config.upArr.length>0){\n                    //         this.config.base=this.config.upArr[this.config.upArr.length-1];\n                    //         this.config.upArr.splice(this.config.upArr.length-1,1);\n                    //     }else{\n                    //         this.config.base=this.config.base+10*this.config.wheelDownNumber;\n                    //         this.config.wheelDownNumber++;\n                    //         this.config.downArr.push(this.config.base);\n                    //     }\n                    //     this.render();\n                    // }\n                }else{\n                    this.addAnimate({ type: 'scale', from: scale, to: config.scale });\n                }\n                this.config.wheelScroll--;\n            }else if(scale<config.scale){ //放大\n                if(this.config.first){\n                    this.config.wheelScroll++\n                    this.config.upArr.push(10);\n                    this.config.first=false;\n                }\n                if(this.config.wheelScroll%4==0){\n                    if(this.config.downArr.length>0){\n                        this.config.base=this.config.downArr[this.config.downArr.length-1];\n                        this.config.downArr.splice(this.config.downArr.length-1,1);\n                    }else{\n                        this.config.base=this.config.base-0.1*this.config.wheelDownNumber;\n                        this.config.wheelDownNumber++;\n                        this.config.downArr.push(this.config.base);\n                    }\n                    this.render();\n                    // if(this.config.downArr.length==0&&this.config.upArr.length==0&&this.config.wheelScroll==100){ //初始化直接缩小\n                    //     this.addAnimate({ type: 'scale', from: scale, to: config.scale });\n                    // }else{\n                    //     if(this.config.downArr.length>0){\n                    //         this.config.base=this.config.downArr[this.config.downArr.length-1];\n                    //         this.config.downArr.splice(this.config.downArr.length-1,1);\n                    //     }else{\n                    //         this.config.base=this.config.base-0.1*this.config.wheelDownNumber;\n                    //         this.config.wheelDownNumber++;\n                    //         this.config.downArr.push(this.config.base);\n                    //     }\n                    //     this.render();\n                    // }\n                }else{\n                    this.addAnimate({ type: 'scale', from: scale, to: config.scale });\n                }\n                this.config.wheelScroll++;\n            }\n        }else {\n            this.render();\n        }\n        return this;\n    };\n    Ruler.prototype.addAnimate = function (_a) {\n        var _this = this;\n        var type = _a.type, from = _a.from, to = _a.to;\n        if (type === 'scale') {\n            var cur_1 = from;\n            var sign_1 = Math.sign(to - from);\n            var start_1;\n            // let elapsed:number;\n            cancelAnimationFrame(this.animateTimer);\n            var doAnimate_1 = function (timestamp) {\n                if (!start_1)\n                    start_1 = timestamp;\n                // elapsed = timestamp - start;\n                // console.log(elapsed);\n                cur_1 = parseFloat((cur_1 + sign_1 * 0.02).toFixed(2));\n                if ((to - cur_1) * sign_1 >= 0) {\n                    Object.assign(_this.config, { scale: cur_1 });\n                    _this.render();\n                    _this.animateTimer = requestAnimationFrame(doAnimate_1);\n                }\n            };\n            this.animateTimer = requestAnimationFrame(doAnimate_1);\n        }\n        return this;\n    };\n    /** befroe render the ruler */\n    Ruler.prototype.beforeRender = function () {\n        var ctx = this.canvas.getContext('2d');\n        var _a = this.canvas, width = _a.width, height = _a.height;\n        ctx.clearRect(0, 0, width, height);\n        var background = this.config.background;\n        ctx.save();\n        ctx.fillStyle = background;\n        ctx.fillRect(0, 0, width, height);\n        ctx.restore();\n        return this;\n    };\n    /**\n     * do rendering\n     */\n    Ruler.prototype.rendering = function () {\n        var _this = this;\n        var ctx = this.canvas.getContext('2d');\n        var _a = this.canvas, width = _a.width, height = _a.height;\n        var _b = this.config, lineWidth = _b.lineWidth, scale = _b.scale, color = _b.color, beginOffset = _b.beginOffset, endOffset = _b.endOffset, base = _b.base, labelScale = _b.labelScale, originOffset = _b.originOffset;\n        /** each space of scale on the screen */\n        var es = base * scale;\n        var pointsArr = [];\n        var LabelArr = [];\n        /** draw the baseLine of the ruler */\n        pointsArr.push([\n            [beginOffset, height - lineWidth / 2],\n            [width - endOffset, height - lineWidth / 2],\n        ]);\n        var splitLine = [];\n        var ZeroPos = beginOffset + originOffset * labelScale;\n        var cur = ZeroPos;\n        var count = 0;\n        // left\n        while (cur > beginOffset) {\n            let from = [cur - lineWidth / 2, height];\n            // eslint-disable-next-line no-nested-ternary\n            let ty = count % 5 ? height / 2 : (count % 10 ? height / 3 : 0);\n            let to = [cur - lineWidth / 2, ty];\n            splitLine.push([from, to]);\n            if (count % 5 === 0) {\n                LabelArr.push({\n                    point: to,\n                    text: String(-(count * base) / labelScale),\n                    type: count % 2,\n                });\n            }\n            cur -= es;\n            count += 1;\n        }\n        cur = ZeroPos + es;\n        count = 1;\n        while (cur < width - endOffset) {\n            let from = [cur - lineWidth / 2, height];\n            // eslint-disable-next-line no-nested-ternary\n            let ty = count % 5 ? height / 2 : (count % 10 ? height / 3 : 0);\n            let to = [cur - lineWidth / 2, ty];\n            splitLine.push([from, to]);\n            if (count % 5 === 0) {\n                LabelArr.push({\n                    point: to,\n                    text: String((count * base) / labelScale),\n                    type: count % 2,\n                });\n            }\n            cur += es;\n            count += 1;\n        }\n        pointsArr.push.apply(pointsArr, splitLine);\n        ctx.save();\n        ctx.beginPath();\n        ctx.lineWidth = lineWidth;\n        ctx.strokeStyle = color;\n        pointsArr.forEach(function (oneItem) {\n            oneItem.forEach(function (p, index) {\n                var x = p[0], y = p[1];\n                if (index === 0)\n                    ctx.moveTo(x, y);\n                else\n                    ctx.lineTo(x, y);\n            });\n        });\n        ctx.closePath();\n        ctx.stroke();\n        ctx.restore();\n        ctx.save();\n        LabelArr.forEach(function (_a) {\n            var point = _a.point, text = _a.text, type = _a.type;\n            _this.renderLabel(text, point[0], point[1], type);\n        });\n        ctx.restore();\n        return this;\n    };\n    /**\n     * after rendered\n     */\n    Ruler.prototype.afterRender = function () {\n        return this;\n    };\n    /**\n     * render the label of the ruler\n     */\n    Ruler.prototype.renderLabel = function (text, x, y, type) {\n        var _a = this.config, canvas = _a.canvas, labelFontFamily = _a.labelFontFamily, labelColor = _a.labelColor;\n        var labelFontSize = this.config.labelFontSize;\n        var ctx = canvas.getContext('2d');\n        var textBaseline;\n        var textAlign;\n        switch (type) {\n            case 0:\n                textBaseline = 'top';\n                textAlign = 'left';\n                x += 1;\n                break;\n            case 1:\n                textBaseline = 'middle';\n                textAlign = 'left';\n                x += 1;\n                y -= 1;\n                labelFontSize -= 1;\n                break;\n            default:\n                break;\n        }\n        ctx.textBaseline = textBaseline;\n        ctx.textAlign = textAlign;\n        ctx.font = labelFontSize + \"px \" + labelFontFamily;\n        ctx.fillStyle = labelColor;\n        ctx.fillText(text, x, y);\n        return this;\n    };\n    /**\n     * check the canvas of config\n     */\n    Ruler.prototype.checkCanvas = function () {\n        var _a = this.config, canvasId = _a.canvasId, canvasClass = _a.canvasClass;\n        if (canvasClass) {\n            this.config.canvas = document.querySelector(canvasId);\n        }\n        if (canvasId) {\n            this.config.canvas = document.querySelector(canvasId);\n        }\n        return this;\n    };\n    /**\n     * destory the instance\n     */\n    Ruler.prototype.dispose = function () {\n        // this.config.canvas = null;\n        this.config = null;\n        return this;\n    };\n    /**\n     * show ruler\n     */\n    Ruler.prototype.show = function () {\n        this.canvas.style.display = 'block';\n        return this;\n    };\n    /**\n     * hidden ruler\n     */\n    Ruler.prototype.hidden = function () {\n        this.canvas.style.display = 'none';\n        return this;\n    };\n    return Ruler;\n}());\nexport default Ruler;\n"],"names":["render","_vm","this","_c","_self","staticClass","attrs","on","$event","drop","allowDrop","staticRenderFns","component","components","created","mounted","canvasId","width","data","zoomPoint","zoom","viewportTransform","design","ActiveObject","ActiveGroup","ruler","timer","lastTime","methods","init","_this","backgroundColor","fabric","opt","mouseWheel","scale","transformMouse","x","y","drag","ev","left","top","json","object","addObject","getCanvas","canvas","console","eval","myChart","type","initialize","options","toObject","_render","pixelRatio","ctx","offcanvas","getSvg","changeImg","objects","height","removeObject","confirmButtonText","cancelButtonText","saveDesign","sessionStorage","JSON","showDesign","path","test","drawPolyLine","finishPolyLine","generatePolygon","points","stroke","strokeWidth","fill","opacity","hasBorders","hasControls","generateSegements","makeCircle","radius","c","addPoint","originX","originY","id","objectCaching","class","selectable","evented","handleLayer","watch","drawType","Ruler","config","color","background","labelColor","labelFontSize","labelFontFamily","lineWidth","lastScale","wheelScroll","wheelUpNumber","wheelDownNumber","upArr","downArr","first","labelScale","document","createElement","start","beginOffset","endOffset","base","originOffset","Object","assign","checkCanvas","resize","defineProperty","prototype","get","enumerable","configurable","style","beforeRender","rendering","afterRender","update","log","push","length","splice","addAnimate","from","to","_a","start_1","cur_1","sign_1","Math","sign","cancelAnimationFrame","animateTimer","doAnimate_1","timestamp","parseFloat","toFixed","requestAnimationFrame","getContext","clearRect","save","fillStyle","fillRect","restore","_b","es","pointsArr","LabelArr","splitLine","ZeroPos","cur","count","ty","point","text","String","apply","beginPath","strokeStyle","forEach","oneItem","p","index","moveTo","lineTo","closePath","renderLabel","textBaseline","textAlign","font","fillText","canvasClass","querySelector","dispose","show","display","hidden"],"sourceRoot":""}